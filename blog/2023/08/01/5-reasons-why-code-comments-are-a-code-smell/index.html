
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../../06/12/marp-markdown-presentation-ecosystem/">
      
      
      
      <link rel="icon" href="../../../../../static/favicon-32x32.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.0-b3">
    
    
      
        <title>5 Reasons why Code Comments are a Code Smell - Homepage of Patrik Hlobil</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.83068744.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../static/custom.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#5-reasons-why-code-comments-are-a-code-smell" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="Homepage of Patrik Hlobil" class="md-header__button md-logo" aria-label="Homepage of Patrik Hlobil" data-md-component="logo">
      
  <img src="../../../../../static/portrait.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Homepage of Patrik Hlobil
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              5 Reasons why Code Comments are a Code Smell
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/PatrikHlobil/Blog" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Blog
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Homepage of Patrik Hlobil" class="md-nav__button md-logo" aria-label="Homepage of Patrik Hlobil" data-md-component="logo">
      
  <img src="../../../../../static/portrait.jpg" alt="logo">

    </a>
    Homepage of Patrik Hlobil
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/PatrikHlobil/Blog" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Blog
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../links.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Links
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../../" class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
                  <span class="md-ellipsis">
                    Back to index
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__title">
                <div class="md-nav__link">
                  <span class="md-ellipsis">
                    Metadata
                  </span>
                </div>
              </li>
              <li class="md-nav__item">
                <div class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg>
                  <time datetime="2023-08-01 00:00:00" class="md-ellipsis">August 1, 2023</time>
                </div>
              </li>
              
              
              
                
                <li class="md-nav__item">
                  <div class="md-nav__link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg>
                    <span class="md-ellipsis">
                      
                        6 min read
                      
                    </span>
                  </div>
                </li>
              
            </ul>
          </nav>
          
            

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-comments-that-just-describe-what-is-happening" class="md-nav__link">
    1. Comments that just describe what is happening
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-comments-are-a-sign-of-too-complex-logic" class="md-nav__link">
    2. Comments are a sign of too complex logic
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-comments-that-describe-the-implementation" class="md-nav__link">
    3. Comments that describe the implementation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-comments-can-be-outdated" class="md-nav__link">
    4. Comments can be outdated
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-comments-can-be-missleading" class="md-nav__link">
    5. ... Comments can be missleading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-outcommmented-code" class="md-nav__link">
    6. Outcommmented code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-comments-hide-bad-naming" class="md-nav__link">
    7. Comments hide bad naming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#good-code-comments" class="md-nav__link">
    Good Code Comments
  </a>
  
    <nav class="md-nav" aria-label="Good Code Comments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-code-documentation" class="md-nav__link">
    1. Code documentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-links-and-additional-information-about-business-logic" class="md-nav__link">
    2. Links and additional information about business logic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-additional-details-that-explain-the-reasoning-for-the-implementation-if-the-latter-is-not-obvious" class="md-nav__link">
    3. Additional details that explain the reasoning for the implementation if the latter is not obvious
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-todo-comments" class="md-nav__link">
    4. TODO Comments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-warnings" class="md-nav__link">
    5. Warnings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  
  


  <nav class="md-tags" >
    
      
      
      
        <span class="md-tag">clean code</span>
      
    
      
      
      
        <span class="md-tag">comments</span>
      
    
  </nav>



  
  


<h1 id="5-reasons-why-code-comments-are-a-code-smell">5 Reasons why Code Comments are a Code Smell<a class="headerlink" href="#5-reasons-why-code-comments-are-a-code-smell" title="Permanent link">&para;</a></h1>
<p><img align="right" alt="Async Python" src="../../../../assets/images/stop_comments.svg" /></p>
<h2 id="1-comments-that-just-describe-what-is-happening">1. Comments that just describe what is happening<a class="headerlink" href="#1-comments-that-just-describe-what-is-happening" title="Permanent link">&para;</a></h2>
<p>Let's have a look at the following code example:
<div class="highlight"><pre><span></span><code><span class="c1">#################</span>
<span class="c1">#### Imports ####</span>
<span class="c1">#################</span>
<span class="kn">import</span> <span class="nn">os.path</span>

<span class="c1"># Define path to executable:</span>
<span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;/usr/bin/executable&quot;</span>

<span class="c1"># Extract directory: </span>
<span class="n">d</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> 

<span class="c1"># Print Directory of executable:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</code></pre></div></p>
<p>These comments just obvioulsy just describe what happens in the code below them. This is however not necessary, because the code is easy to read if we just <strong>name the variables better</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">path_to_executable</span> <span class="o">=</span> <span class="s2">&quot;/usr/bin/executable&quot;</span>
<span class="n">directory_of_executable</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">path_to_executable</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">directory_of_executable</span><span class="p">)</span>
</code></pre></div>
<h2 id="2-comments-are-a-sign-of-too-complex-logic">2. Comments are a sign of too complex logic<a class="headerlink" href="#2-comments-are-a-sign-of-too-complex-logic" title="Permanent link">&para;</a></h2>
<p>Often, we see code comments when the code deals with complex or nested logic:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># We do have to check, that the credit card of the user is not expired and that the user is solvent.</span>
<span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;solvent&quot;</span> <span class="ow">and</span> <span class="n">user</span><span class="o">.</span><span class="n">credit_card</span><span class="o">.</span><span class="n">get_expiration_dt</span> <span class="o">&lt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
    <span class="c1"># If we process Visa cards, online payment service has to be enabled:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">credit_card</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;Visa&quot;</span> <span class="ow">and</span> <span class="s2">&quot;online_payment&quot;</span> <span class="ow">in</span> <span class="n">user</span><span class="o">.</span><span class="n">credit_card</span><span class="o">.</span><span class="n">payment_services</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">OnlinePaymentServiceNotEnabledException</span><span class="p">(</span><span class="s2">&quot;Visa Payment not possible.&quot;</span><span class="p">)</span> 
    <span class="n">process_payment</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">credit_card</span><span class="p">,</span> <span class="n">payment_details</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">PaymentException</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
</code></pre></div>
<p>This is not optimal to read and also there is the danger, that the comments will be outdated (see below) after some time. It is in this case better to define small functions with a proper name that describe what happens within the code:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="n">is_solvent</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="ow">and</span> <span class="n">credit_card_is_active</span><span class="p">(</span><span class="n">credit_card</span><span class="o">:=</span><span class="n">user</span><span class="o">.</span><span class="n">credit_card</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">credit_card</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;Visa&quot;</span> <span class="ow">and</span> <span class="n">online_payment_service_enabled</span><span class="p">(</span><span class="n">credit_card</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="n">OnlinePaymentServiceNotEnabledException</span><span class="p">(</span><span class="s2">&quot;Visa Payment not possible.&quot;</span><span class="p">)</span>
    <span class="n">process_payment</span><span class="p">(</span><span class="n">credit_card</span><span class="p">,</span> <span class="n">payment_details</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">PaymentException</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">is_solvent</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;solvent&quot;</span>

<span class="k">def</span> <span class="nf">credit_card_is_active</span><span class="p">(</span><span class="n">credit_card</span><span class="p">:</span> <span class="n">CreditCard</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">credit_card</span><span class="o">.</span><span class="n">get_expiration_dt</span> <span class="o">&lt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">date</span>

<span class="k">def</span> <span class="nf">online_payment_service_enabled</span><span class="p">(</span><span class="n">credit_card</span><span class="p">:</span> <span class="n">CreditCard</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="s2">&quot;online_payment&quot;</span> <span class="ow">in</span> <span class="n">user</span><span class="o">.</span><span class="n">credit_card</span><span class="o">.</span><span class="n">payment_services</span>
</code></pre></div>
<h2 id="3-comments-that-describe-the-implementation">3. Comments that describe the implementation<a class="headerlink" href="#3-comments-that-describe-the-implementation" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">calculate_distance</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Vector</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Vector</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The distance is calculated by:</span>
<span class="sd">            1. Calculate the difference between each components of the 2 vectors</span>
<span class="sd">            2. Square the differences</span>
<span class="sd">            3. Sum up </span>
<span class="sd">            4. Take the squareroot</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">square_sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">difference</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">square</span> <span class="o">=</span> <span class="n">difference</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">square_sum</span> <span class="o">+=</span> <span class="n">square</span>

    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">square_sum</span><span class="p">)</span>
</code></pre></div>
<p>Why do we need this? The code described perfectly what is happening and there is not need to describe the implementation, also because the implementation can be changed in different ways (e.g. using a high-level libary like <code>numpy</code>).</p>
<h2 id="4-comments-can-be-outdated">4. Comments can be outdated<a class="headerlink" href="#4-comments-can-be-outdated" title="Permanent link">&para;</a></h2>
<p>When code is changed or refactored, the <strong>test suite</strong> should ensure that the business logic and functionality of the program is still valid. However, <strong>comments</strong> are like dead code and are likely to be untouched by the programmer at hand. Thus, if the implementation changes, the comments are more likely to not describe the logic anymore. Even worse, these outdated ...</p>
<h2 id="5-comments-can-be-missleading">5. ... Comments can be missleading<a class="headerlink" href="#5-comments-can-be-missleading" title="Permanent link">&para;</a></h2>
<p>Comments can be missleading, because they are not well written (<em>"hey, this is just a comment. No need to really be carefull writing these ..."</em>) or are outdated (like stated above). </p>
<p>Consider the following example:
<div class="highlight"><pre><span></span><code><span class="c1"># User is an adult:</span>
<span class="k">if</span> <span class="n">user_age</span> <span class="o">&gt;=</span> <span class="mi">18</span><span class="p">:</span>
    <span class="c1"># User is active</span>
    <span class="k">if</span> <span class="n">user_is_active</span><span class="p">:</span>
        <span class="n">process_payment</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">UserNotActiveException</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">UserNotOldEnoughtException</span><span class="p">()</span>
</code></pre></div></p>
<p>This is a pretty nested logic for such an easy business logic. Thus, we should invert the conditions to simplify the processing logic. So let us refactor this a bit
<div class="highlight"><pre><span></span><code><span class="c1"># User is an adult:</span>
<span class="k">if</span> <span class="n">user_age</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">UserNotOldEnoughtException</span><span class="p">()</span>
<span class="c1"># User is active</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">user_is_active</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">UserNotActiveException</span><span class="p">()</span>
<span class="n">process_payment</span><span class="p">()</span>
</code></pre></div></p>
<p>This code is obviously better, so the refactoring was a good idea. However, if you look closely, we forgot to adjust the code comments and now they are missleading.</p>
<h2 id="6-outcommmented-code">6. Outcommmented code<a class="headerlink" href="#6-outcommmented-code" title="Permanent link">&para;</a></h2>
<p>Since we all have a good version control system at hand today (<strong>#git</strong>), there is really no way of storing old or unfinished code in the production branch. Keep these <code>dead code</code> parts away from production, <strong>PERIOD</strong>.</p>
<p><img align="right" alt="" src="../../../../assets/images/searching_meaningful_variable_name.png" width="300" /></p>
<h2 id="7-comments-hide-bad-naming">7. Comments hide bad naming<a class="headerlink" href="#7-comments-hide-bad-naming" title="Permanent link">&para;</a></h2>
<p>Often, comments are used to describe a variable, because there was no effort to try to name the variable <strong>properly</strong>. Look at the following example:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>


<span class="k">def</span> <span class="nf">check_token_validity</span><span class="p">(</span><span class="n">token_dt</span><span class="p">):</span>
    <span class="c1"># We check that the token timestamp is only 1 hour old</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">-</span> <span class="n">token_dt</span> <span class="o">&lt;</span> <span class="mi">3600</span>
</code></pre></div>
<p>There are several things that we can improve on this code snippet:</p>
<ol>
<li>The name <code>token_dt</code> implies that we have a <code>datetime</code> object at hand. However, if we look closely, we see that it is a <strong>UTC Timestamp</strong>!</li>
<li>Doing calculation in comparisons is generally a bad idea, because it makes the expression to complex to directly understand it</li>
<li>What is the 3600 doing there? What is the unit and why was it chosen? We should make it clearer what this number means.</li>
</ol>
<p>Now, let us look at the refactored code:
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>

<span class="n">MAXIMUM_TOKEN_LIFETIME_IN_SECONDS</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span>

<span class="k">def</span> <span class="nf">check_token_validity</span><span class="p">(</span><span class="n">token_timestamp</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="n">current_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
    <span class="n">token_lifetime</span> <span class="o">=</span> <span class="n">current_timestamp</span> <span class="o">-</span> <span class="n">token_timestamp</span>
    <span class="k">return</span> <span class="n">token_lifetime</span> <span class="o">&lt;</span> <span class="n">MAXIMUM_TOKEN_LIFETIME_IN_SECONDS</span>
</code></pre></div></p>
<p>We have:
1. </p>
<h2 id="good-code-comments">Good Code Comments<a class="headerlink" href="#good-code-comments" title="Permanent link">&para;</a></h2>
<p>After we have seen, that most common patterns of code comments are actually not a great idea, let us look at the exceptions:</p>
<h4 id="1-code-documentation">1. Code documentation<a class="headerlink" href="#1-code-documentation" title="Permanent link">&para;</a></h4>
<p>Code documentation for public APIs like docstrings can be a great idea, especially for libraries that are consumed by 3rd parties. These docstrings can then be picked up by documentation tools like <strong>Sphinx</strong> or <strong>MKDocs</strong> for an automated generation of nice API documentation.</p>
<p>Note, that is in general not necessary to put a code comment on private functions that are not part of the public API, because they should in general not be used by external user and typically have a higher rate of change than the public APIs. Therefore, they are prone to outdated and missleading docstrings/comments as described above. Typically, for these functions you should invest in a good function name that describes properly what it does without the need of additional commentary. If this is not possible, this is often a sign of a function that does 2 or more things and should therefore be split up and refactored to reduce its complexity. </p>
<h4 id="2-links-and-additional-information-about-business-logic">2. Links and additional information about business logic<a class="headerlink" href="#2-links-and-additional-information-about-business-logic" title="Permanent link">&para;</a></h4>
<p>If a programm is written as a feature of a e.g. story, it may be a good idea to reference the story at the high-level code interface. Thus, when another programmer wants to know, why a functionality has been developed in the first place, he can go back to the story or additional user documentation.</p>
<h4 id="3-additional-details-that-explain-the-reasoning-for-the-implementation-if-the-latter-is-not-obvious">3. Additional details that explain the reasoning for the implementation if the latter is not obvious<a class="headerlink" href="#3-additional-details-that-explain-the-reasoning-for-the-implementation-if-the-latter-is-not-obvious" title="Permanent link">&para;</a></h4>
<p>There are code implementations or bugfixes that may not be obvious for a reader without the corresponding context. For these, there should be a reference to the corresponding issue or a comment describing the background information necessary to understand the maybe complex implementation. Think about something like this:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>

<span class="n">run_id</span> <span class="o">=</span> <span class="n">start_run</span><span class="p">()</span>

<span class="c1"># We have to wait a few seconds for the server to respond after the submission of a run. If we query for the run status</span>
<span class="c1"># too early, we will get an error, because the internal database of the service has to catch up:</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">WAIT_TIME_IN_SECONDS</span><span class="p">)</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">run_finished</span> <span class="o">=</span> <span class="n">poke_for_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">run_finished</span><span class="p">:</span>
        <span class="k">break</span>
</code></pre></div>
<p>A programmer without detailed knowledge of the external system will need additional information about the intend of a chosen solution to understand the reasoning.</p>
<h4 id="4-todo-comments">4. TODO Comments<a class="headerlink" href="#4-todo-comments" title="Permanent link">&para;</a></h4>
<p>Sometimes, when working on code we find a part of the code that is not well written or might have a bad side effect in the future, but we do not have the time to directly work on the problem. Or we see that we can improve an implementation and make it way more efficient. Leaving a <code># TODO</code> comment can be a great way of finding those pieces in your code to later work on them.</p>
<h4 id="5-warnings">5. Warnings<a class="headerlink" href="#5-warnings" title="Permanent link">&para;</a></h4>
<p>Sometimes, there is a strange side effect or just something that a user has to know before he is calling the function at hand. Here, a warning comment may be appropriate.</p>



  



      
    </article>
  </div>

          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["search.highlight", "search.suggest", "search.share", "toc.follow", "toc.integrate", "navigation.instant", "content.code.copy"], "search": "../../../../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.4e31edb1.min.js"></script>
      
    
  </body>
</html>